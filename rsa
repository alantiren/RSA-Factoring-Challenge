#!/usr/bin/env python3

import sys
from sympy import isprime, factorint


def factorize_number(number):
    if isprime(number):
        print(f"{number}={number}*1")  # Prime number, so only one factorization
    else:
        factors = factorint(number)
        for factor, count in factors.items():
            power = f"^{count}" if count > 1 else ""
            print(f"{number}={factor}{power}*{number//factor}")

def main():
    if len(sys.argv) != 2:
        print("Usage: rsa <file>")
        return

    filename = sys.argv[1]
    try:
        with open(filename, 'r') as file:
            number = int(file.readline().strip())
            factorize_number(number)
    except FileNotFoundError:
        print(f"File not found: {filename}")
    except ValueError:
        print(f"Invalid number in file: {filename}")

if __name__ == "__main__":
    main()
